// èªžè¨€ç¿»è­¯æ•¸æ“š
const translations = {
    zh: {
        "title": "æˆ‘çš„ç°¡æ­·",
        "home": "é¦–é ",
        "home-link": "é¦–é ",
        "about-link": "é—œæ–¼æˆ‘",
        "photo-link": "ç…§ç‰‡",
        "contact-link": "è¯çµ¡",
        "autobiography": "è‡ªå‚³",
        "intro-1": "æˆ‘æ˜¯ Leroy Chang",
        "intro-2": "æ²’æœ‰ç›¸é—œç§‘ç³»èƒŒæ™¯èˆ‡ç›¸é—œå·¥ä½œç¶“é©—ï¼Œé€éŽè‡ªå­¸é€²å…¥å‰ç«¯é–‹ç™¼é ˜åŸŸ",
        "name": "LEROY CHANG",
        "more": "æ›´å¤š...",
        "good-intro-1": "æˆ‘æ˜¯ Leroy Chang",
        "good-intro-2": "åœ¨æˆ‘å‡ºç¤¾æœƒå¾Œï¼Œæ‰€æœ‰çš„å·¥ä½œç¶“é©—éƒ½æ˜¯é¤é£²æ¥­ï¼Œåšäº†6å¹´ä»¥ä¸Šçš„é¤é£²æ¥­ï¼Œé€™æ®µç¶“æ­·è®“æˆ‘å­¸æœƒäº†åœ˜éšŠåˆä½œã€æ‡‰å°æŒ‘æˆ°ã€‚å·¥ä½œäº†ä¸€é™£å­å¾Œä¹Ÿæ¼¸æ¼¸åœ°æ˜Žç™½å·¥ä½œå°è‡ªå·±çš„æ„ç¾©æ˜¯ä»€éº¼ä»¥åŠè‡ªå·±é‡è¦–çš„åœ°æ–¹ï¼Œç•¶ç„¶é€™äº›æƒ³æ³•ä¹Ÿå¯èƒ½éš¨è‘—å¹´ç´€çš„ä¸åŒè€Œæœ‰æ‰€è½‰è®Šï¼Œé›–ç„¶ç©©å®šä½†å› ç‚ºç”¢æ¥­å±¬æ€§çš„é—œä¿‚é›£ä»¥æƒ³åƒäº”å¹´å¾Œçš„è‡ªå·±æœƒæ˜¯ä»€éº¼æ¨¡æ¨£ã€ç”šè‡³æ˜¯åå¹´å¾ŒäºŒåå¹´å¾Œ..æ¯å¤©ç©©å®šä¸”å¹³æ·¡ï¼Œé€™æ¨£æ²’æœ‰ä¸å¥½ä½†ç¸½æ„Ÿè¦ºèƒ½åšçš„æ›´å¤šï¼Œè½‰è·çš„å¿µé ­ä¸€ç›´å­˜åœ¨æˆ‘å¿ƒä¸­ï¼Œä½†è¸å‡ºèˆ’é©åœˆä¸æ˜¯ä»¶ç°¡å–®çš„äº‹æƒ…æœ‰å¤ªå¤šäº‹æƒ…è¦è€ƒæ…®ï¼ŒåŒ…æ‹¬è·³æ§½åˆ°å“ªå€‹è¡Œæ¥­ï¼Ÿæ²’æœ‰ç¶“æ¿Ÿä¾†æºè©²æ€Žéº¼è¾¦ï¼Ÿä¸€äº›çœ‹èµ·ä¾†å¾ˆåš´é‡çš„å•é¡Œå°±è®“æˆ‘é²é²ä¸æ•¢æœ‰ä»€éº¼å¯¦éš›çš„è¡Œå‹•ï¼Œæœ€å¾Œæ±ºå®šåœ¨æˆ‘26æ­²æ™‚ç¨è‡ªé èµ´åŠ æ‹¿å¤§ðŸ‡¨ðŸ‡¦çœ‹çœ‹ä¸–ç•Œï¼Œåœ¨åŠ æ‹¿å¤§çš„é€™ä¸€å¹´è£¡æˆ‘æŽ¥è§¸åˆ°äº†å„ç¨®é ˜åŸŸçš„äººï¼ŒæŽ¥è§¸åˆ°è»Ÿé«”å·¥ç¨‹é€™å€‹é ˜åŸŸçš„æœ‹å‹å¾Œæ±ºå®šå…ˆå¾žç¶²é å‰ç«¯ä¹Ÿæ˜¯å¤§å®¶èªç‚ºå°é›¶ç¨‹å¼åŸºç¤Žçš„äººæœ€å®¹æ˜“ä¸Šæ‰‹ä½œç‚ºè½‰è·èµ·é»žã€‚",
        "motto": "å¦‚æžœä½ å¾žä¸å˜—è©¦ï¼Œä½ å°‡ä¸€ç„¡æ‰€çŸ¥ã€‚",
        "learning-process": "è‡ªå­¸éŽç¨‹",
        "learning-1": "é–‹å§‹è§€çœ‹å„ç¨®youtubeæ•™å­¸å½±ç‰‡",
        "learning-2": "æŽŒæ¡å¿…å‚™æŠ€èƒ½ã€åŸºç¤ŽçŸ¥è­˜ã€è‡ªè¨‚å­¸ç¿’è¨ˆåŠƒ",
        "learning-3": "æŽŒæ¡HTML & CSS åŸºç¤Ž",
        "learning-4": "é–‹å§‹å­¸ç¿’JavaScript åŸºç¤Ž",
        "learning-5": "DOM æ“ä½œ + äº‹ä»¶è™•ç†",
        "learning-6": "æ•´åˆ HTML / CSS / JS",
        "learning-7": "æ…¢æ…¢é–‹å§‹æŽ¥è§¸Vue.js & React.js",
        "learning-goal": "å¸Œæœ›èƒ½å¤ é€éŽ Vue.js èˆ‡ React.js å»ºæ§‹æ›´å®Œæ•´çš„ Web æ‡‰ç”¨ï¼Œæœªä¾†ä¹Ÿè¨ˆç•«å­¸ç¿’å¾Œç«¯æŠ€è¡“ï¼Œæˆç‚ºå…·å‚™å…¨ç«¯èƒ½åŠ›çš„é–‹ç™¼è€…",
        "contact": "è¯çµ¡æ–¹å¼",
        "contact-email": "é€éŽé›»å­éƒµä»¶è¯ç¹«æˆ‘",
        "send": "ç™¼é€",
        "copyright": "ç‰ˆæ¬Šæ‰€æœ‰ Â© 2024 LEROY. ä¿ç•™æ‰€æœ‰æ¬Šåˆ©ã€‚",
        "email-placeholder": "åœ¨æ­¤è¼¸å…¥æ‚¨çš„é›»å­éƒµä»¶",
        "message-placeholder": "åœ¨æ­¤è¼¸å…¥æ‚¨çš„è¨Šæ¯..."
    },
    en: {
        "title": "My Resume",
        "home": "Home",
        "home-link": "Home",
        "about-link": "About Me",
        "photo-link": "Photos",
        "contact-link": "Contact",
        "autobiography": "Autobiography",
        "intro-1": "I am Leroy Chang",
        "intro-2": "Without relevant academic background or work experience, I entered the front-end development field through self-learning",
        "name": "LEROY CHANG",
        "more": "More...",
        "good-intro-1": "I am Leroy Chang",
        "good-intro-2": "After entering society, all my work experience has been in the catering industry for over 6 years. This experience taught me teamwork and how to face challenges. After working for a while, I gradually understood the meaning of work and what I value. Of course, these thoughts might change with age. Although stable, the industry's nature makes it difficult to imagine what I'll be like in five years, or even ten or twenty years... Every day is stable and plain, which isn't bad, but I feel I could do more. The idea of changing careers has always been in my mind, but stepping out of my comfort zone isn't simple. There are many things to consider, such as which industry to switch to? What if I have no income? Some seemingly serious problems have kept me from taking any real action. Finally, I decided to travel to Canada ðŸ‡¨ðŸ‡¦ alone when I was 26 to see the world. During that year in Canada, I met people from various fields and after connecting with friends in the software engineering field, I decided to start with web front-end development (which is considered the easiest for those with no programming background) as my career transition point.",
        "motto": "If you never try, you'll never find out.",
        "learning-process": "Learning Process",
        "learning-1": "Started watching various YouTube tutorial videos",
        "learning-2": "Mastered essential skills, basic knowledge, and created a self-study plan",
        "learning-3": "Mastered HTML & CSS basics",
        "learning-4": "Started learning JavaScript basics",
        "learning-5": "DOM manipulation + Event handling",
        "learning-6": "Integrated HTML / CSS / JS",
        "learning-7": "Gradually started exploring Vue.js & React.js",
        "learning-goal": "Hope to build more comprehensive web applications through Vue.js and React.js, and plan to learn backend technologies in the future to become a full-stack developer",
        "contact": "Contact Information",
        "contact-email": "Contact me by Email",
        "send": "Send",
        "copyright": "Copyright Â© 2024 LEROY. All rights reserved.",
        "email-placeholder": "Enter your email Here",
        "message-placeholder": "Your message here..."
    }
};

// ç­‰å¾…DOMå®Œå…¨åŠ è¼‰
document.addEventListener('DOMContentLoaded', () => {
    // é¸å–®åŠŸèƒ½
    const menuBtn = document.querySelector('.menu');
    const navMenu = document.querySelector('header ul');
    
    if (menuBtn) {
        menuBtn.addEventListener('click', () => {
            navMenu.classList.toggle('active');
        });
    }
    
    // é»žæ“Šé é¢å…¶ä»–åœ°æ–¹é—œé–‰é¸å–®
    document.addEventListener('click', (e) => {
        if (!e.target.closest('header') && navMenu.classList.contains('active')) {
            navMenu.classList.remove('active');
        }
    });
    
    // æ»¾å‹•æ•ˆæžœ
    const sections = document.querySelectorAll('section');
    
    const fadeInElements = () => {
        sections.forEach(section => {
            const sectionTop = section.getBoundingClientRect().top;
            const windowHeight = window.innerHeight;
            
            if (sectionTop < windowHeight * 0.75) {
                section.style.opacity = '1';
                section.style.transform = 'translateY(0)';
            }
        });
    };
    
    // åˆå§‹è¨­ç½®
    sections.forEach(section => {
        section.style.opacity = '0';
        section.style.transform = 'translateY(20px)';
        section.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
    });
    
    // åˆæ¬¡åŠ è¼‰æ™‚æª¢æŸ¥
    fadeInElements();
    
    // æ»¾å‹•æ™‚æª¢æŸ¥
    window.addEventListener('scroll', fadeInElements);
    
    // è¡¨å–®æäº¤è™•ç†
    const form = document.querySelector('.contact form');
    if (form) {
        form.addEventListener('submit', (e) => {
            e.preventDefault(); // é˜²æ­¢è¡¨å–®é»˜èªæäº¤è¡Œç‚º
            
            const button = form.querySelector('button');
            const emailInput = form.querySelector('input[type="email"]');
            const messageInput = form.querySelector('textarea');
            
            // é¡¯ç¤ºæäº¤ä¸­å‹•ç•«
            button.textContent = 'ç™¼é€ä¸­...';
            button.disabled = true;
            
            // ä½¿ç”¨Fetch APIç™¼é€è¡¨å–®æ•¸æ“šåˆ°Formspree
            fetch(form.action, {
                method: 'POST',
                body: new FormData(form),
                headers: {
                    'Accept': 'application/json'
                }
            })
            .then(response => response.json())
            .then(data => {
                // æˆåŠŸæäº¤å¾Œ
                button.textContent = 'å·²ç™¼é€!';
                button.style.backgroundColor = '#4CAF50';
                
                // æ¸…ç©ºè¡¨å–®
                emailInput.value = '';
                messageInput.value = '';
                
                // é¡¯ç¤ºæˆåŠŸè¨Šæ¯
                const successMessage = document.createElement('div');
                successMessage.className = 'success-message';
                successMessage.textContent = 'Message submitted successfully!';
                successMessage.style.color = '#4CAF50';
                successMessage.style.marginTop = '10px';
                successMessage.style.fontWeight = 'bold';
                form.appendChild(successMessage);
                
                // å®šæ™‚ç§»é™¤æˆåŠŸè¨Šæ¯
                setTimeout(() => {
                    successMessage.remove();
                    
                    // æ¢å¾©æŒ‰éˆ•ç‹€æ…‹
                    button.textContent = 'ç™¼é€';
                    button.style.backgroundColor = '';
                    button.disabled = false;
                }, 3000);
            })
            .catch(error => {
                // éŒ¯èª¤è™•ç†
                button.textContent = 'ç™¼é€å¤±æ•—';
                button.style.backgroundColor = '#f44336';
                
                setTimeout(() => {
                    button.textContent = 'ç™¼é€';
                    button.style.backgroundColor = '';
                    button.disabled = false;
                }, 3000);
                
                console.error('Error:', error);
            });
        });
    }
    
    // ç²å–æ‰€æœ‰å°ŽèˆªéˆæŽ¥
    const navLinks = document.querySelectorAll('header ul li a');

    // ç‚ºæ¯å€‹éˆæŽ¥æ·»åŠ é»žæ“Šäº‹ä»¶
    navLinks.forEach(link => {
        link.addEventListener('click', () => {
            // å¦‚æžœå°Žèˆªé¸å–®æ˜¯æ‰“é–‹çš„ï¼Œå‰‡é—œé–‰å®ƒ
            if (navMenu.classList.contains('active')) {
                navMenu.classList.remove('active');
            }
        });
    });

    // èªžè¨€åˆ‡æ›åŠŸèƒ½
    const zhBtn = document.getElementById('zh-btn');
    const enBtn = document.getElementById('en-btn');
    const htmlRoot = document.getElementById('html-root');

    // åˆ‡æ›èªžè¨€çš„å‡½æ•¸
    function setLanguage(lang) {
        // æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
        zhBtn.classList.toggle('active', lang === 'zh');
        enBtn.classList.toggle('active', lang === 'en');

        // æ›´æ–°èªžè¨€å±¬æ€§
        htmlRoot.lang = lang === 'zh' ? 'zh-TW' : 'en';

        // ç¿»è­¯æ‰€æœ‰å¸¶æœ‰ data-translate å±¬æ€§çš„å…ƒç´ 
        document.querySelectorAll('[data-translate]').forEach(el => {
            const key = el.getAttribute('data-translate');
            el.textContent = translations[lang][key];
        });

        // æ›´æ–°è¡¨å–®è¼¸å…¥æ¡†çš„ placeholder
        const emailInput = document.querySelector('input[type="email"]');
        const messageInput = document.querySelector('textarea');
        if (emailInput) {
            emailInput.placeholder = translations[lang]['email-placeholder'];
        }
        if (messageInput) {
            messageInput.placeholder = translations[lang]['message-placeholder'];
        }

        // å„²å­˜èªžè¨€åå¥½
        localStorage.setItem('language', lang);
    }

    // è¨­ç½®åˆå§‹èªžè¨€
    const savedLanguage = localStorage.getItem('language') || 'zh';
    setLanguage(savedLanguage);

    // æ·»åŠ èªžè¨€åˆ‡æ›äº‹ä»¶ç›£è½å™¨
    zhBtn.addEventListener('click', () => setLanguage('zh'));
    enBtn.addEventListener('click', () => setLanguage('en'));
});